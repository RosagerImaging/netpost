(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{5468:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/settings/billing",function(){return t(2548)}])},2874:function(e,s,t){"use strict";t.d(s,{Z:function(){return DashboardLayout}});var r=t(4246),a=t(7378),i=t(9894),n=t.n(i),l=t(6677),o=t(6518),d=t(6111),c=t(4752),x=t(1842),m=t(92),h=t(4092),u=t(343),g=t(2640),p=t(6498),f=t(169),y=t(772),b=t(177),j=t(624);let N=[{name:"Dashboard",href:"/dashboard",icon:d.Z,current:!0},{name:"Inventory",href:"/dashboard/inventory",icon:c.Z,current:!1},{name:"Cross-listing",href:"/dashboard/cross-listing",icon:x.Z,current:!1},{name:"Analytics",href:"/dashboard/analytics",icon:m.Z,current:!1},{name:"SEO Analysis",href:"/dashboard/seo",icon:h.Z,current:!1},{name:"Settings",href:"/dashboard/settings",icon:u.Z,current:!1}];function DashboardLayout(e){var s,t;let{children:i}=e,[d,c]=(0,a.useState)(!1),{user:x,logout:m}=(0,o.aC)(),h=(0,l.useRouter)(),u=N.map(e=>({...e,current:h.pathname===e.href||h.pathname.startsWith(e.href+"/")})),handleLogout=async()=>{try{await m()}catch(e){console.error("Logout failed:",e)}};return(0,r.jsxs)("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[(0,r.jsxs)("div",{className:(0,j.Z)("fixed inset-0 flex z-40 lg:hidden",d?"block":"hidden"),children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>c(!1)}),(0,r.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,r.jsx)("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>c(!1),children:(0,r.jsx)(g.Z,{className:"h-6 w-6 text-white"})})}),(0,r.jsxs)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center px-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-primary-600",children:"NetPost"})}),(0,r.jsx)("nav",{className:"mt-5 px-2 space-y-1",children:u.map(e=>(0,r.jsxs)(n(),{href:e.href,className:(0,j.Z)(e.current?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center px-2 py-2 text-base font-medium rounded-md"),children:[(0,r.jsx)(e.icon,{className:(0,j.Z)(e.current?"text-gray-500":"text-gray-400 group-hover:text-gray-500","mr-4 flex-shrink-0 h-6 w-6")}),e.name]},e.name))})]}),(0,r.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{children:(0,r.jsx)(p.Z,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("p",{className:"text-base font-medium text-gray-700",children:[null==x?void 0:x.firstName," ",null==x?void 0:x.lastName]}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:null==x?void 0:x.email})]})]})})]})]}),(0,r.jsx)("div",{className:"hidden lg:flex lg:flex-shrink-0",children:(0,r.jsx)("div",{className:"flex flex-col w-64",children:(0,r.jsxs)("div",{className:"flex flex-col h-0 flex-1 border-r border-gray-200 bg-white",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[(0,r.jsx)("div",{className:"flex items-center flex-shrink-0 px-4",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-primary-600",children:"NetPost"})}),(0,r.jsx)("nav",{className:"mt-5 flex-1 px-2 bg-white space-y-1",children:u.map(e=>(0,r.jsxs)(n(),{href:e.href,className:(0,j.Z)(e.current?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center px-2 py-2 text-sm font-medium rounded-md"),children:[(0,r.jsx)(e.icon,{className:(0,j.Z)(e.current?"text-gray-500":"text-gray-400 group-hover:text-gray-500","mr-3 flex-shrink-0 h-6 w-6")}),e.name]},e.name))})]}),(0,r.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{children:(0,r.jsx)(p.Z,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[null==x?void 0:x.firstName," ",null==x?void 0:x.lastName]}),(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500",children:null==x?void 0:x.email})]})]}),(0,r.jsx)("button",{onClick:handleLogout,className:"ml-3 p-1 text-gray-400 hover:text-gray-500",title:"Logout",children:(0,r.jsx)(f.Z,{className:"h-5 w-5"})})]})})]})})}),(0,r.jsxs)("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[(0,r.jsx)("div",{className:"lg:hidden pl-1 pt-1 sm:pl-3 sm:pt-3",children:(0,r.jsx)("button",{className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:()=>c(!0),children:(0,r.jsx)(y.Z,{className:"h-6 w-6"})})}),(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"/dashboard"===(t=h.pathname)?"Dashboard":t.startsWith("/dashboard/inventory")?"Inventory":t.startsWith("/dashboard/cross-listing")?"Cross-listing":t.startsWith("/dashboard/analytics")?"Analytics":t.startsWith("/dashboard/seo")?"SEO Analysis":t.startsWith("/dashboard/settings")?"Settings":"Dashboard"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:(0,j.Z)("px-2 py-1 text-xs font-medium rounded-full",(null==x?void 0:x.subscriptionTier)==="enterprise"?"bg-purple-100 text-purple-800":(null==x?void 0:x.subscriptionTier)==="professional"?"bg-blue-100 text-blue-800":(null==x?void 0:x.subscriptionTier)==="starter"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:(null==x?void 0:null===(s=x.subscriptionTier)||void 0===s?void 0:s.toUpperCase())||"TRIAL"}),(0,r.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-500",children:(0,r.jsx)(b.Z,{className:"h-6 w-6"})}),(0,r.jsx)("div",{className:"lg:hidden",children:(0,r.jsx)("button",{onClick:handleLogout,className:"p-1 text-gray-400 hover:text-gray-500",children:(0,r.jsx)(f.Z,{className:"h-6 w-6"})})})]})]})}),(0,r.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:(0,r.jsx)("div",{className:"py-6",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})})]})]})}},2548:function(e,s,t){"use strict";t.r(s);var r=t(4246),a=t(7378),i=t(6677),n=t(6552),l=t(6518),o=t(2874),d=t(3895),c=t(8272),x=t(1842),m=t(2640),h=t(1576),u=t(5083),g=t(624);s.default=(0,l.QO)(function(){let e=(0,i.useRouter)(),{user:s}=(0,l.aC)(),t=(0,n.useQueryClient)(),[p,f]=(0,a.useState)("");(0,a.useEffect)(()=>{let{session_id:s}=e.query;s&&(t.invalidateQueries(["user"]),e.replace("/dashboard/settings/billing",void 0,{shallow:!0}))},[e.query,t,e]);let y=[{id:"starter",name:"Starter",price:19,priceId:"price_starter",features:["25 cross-listings per month","Basic SEO optimization","2 platform integrations","Email support","7-day free trial"],popular:!1},{id:"professional",name:"Professional",price:49,priceId:"price_professional",features:["100 cross-listings per month","Advanced SEO optimization","All platform integrations","Priority support","Business analytics","Bulk operations","API access"],popular:!0},{id:"enterprise",name:"Enterprise",price:99,priceId:"price_enterprise",features:["Unlimited cross-listings","AI-powered optimization","All platform integrations","24/7 priority support","Advanced analytics","Custom integrations","Dedicated account manager","SLA guarantee"],popular:!1}],b=(0,n.useMutation)(async e=>{let s=await fetch("/api/billing/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.x.getToken())},body:JSON.stringify(e)});if(!s.ok)throw Error("Failed to create checkout session");let t=await s.json();return t},{onSuccess:e=>{e.url&&(window.location.href=e.url)},onError:e=>{console.error("Failed to create checkout session:",e)}}),j=(0,n.useMutation)(async()=>{let e=await fetch("/api/billing/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.x.getToken())}});if(!e.ok)throw Error("Failed to cancel subscription");return e.json()},{onSuccess:()=>{t.invalidateQueries(["user"])},onError:e=>{console.error("Failed to cancel subscription:",e)}}),handleUpgrade=e=>{let s=y.find(s=>s.id===e);s&&b.mutate({priceId:s.priceId,planType:s.id})},N=s&&y.find(e=>e.id===s.subscriptionTier)||null;return(0,r.jsx)(o.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Billing & Subscription"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your subscription and billing preferences"})]}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Current Subscription"}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 text-indigo-500 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:N?N.name:"Free Trial"}),(null==s?void 0:s.subscriptionStatus)==="trialing"&&(0,r.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Trial"}),(null==s?void 0:s.subscriptionStatus)==="active"&&(0,r.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:N?"$".concat(N.price,"/month"):"Free"}),(null==s?void 0:s.trialEndDate)&&"trialing"===s.subscriptionStatus&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Trial ends on ",new Date(s.trialEndDate).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(null==s?void 0:s.subscriptionStatus)==="active"&&(0,r.jsxs)("button",{onClick:()=>j.mutate(),disabled:j.isLoading,className:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:[j.isLoading?(0,r.jsx)(x.Z,{className:"animate-spin h-4 w-4 mr-2"}):(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Cancel Subscription"]}),(0,r.jsxs)("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Manage Payment Methods"]})]})]})]})}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Available Plans"}),(0,r.jsx)("div",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:y.map(e=>(0,r.jsxs)("div",{className:(0,g.Z)("relative rounded-lg border p-6",e.popular?"border-indigo-500 bg-indigo-50":"border-gray-200",(null==N?void 0:N.id)===e.id&&"ring-2 ring-indigo-500"),children:[e.popular&&(0,r.jsx)("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium bg-indigo-500 text-white",children:"Most Popular"})}),(null==N?void 0:N.id)===e.id&&(0,r.jsx)("div",{className:"absolute -top-2 right-4",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium bg-green-500 text-white",children:"Current Plan"})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:["$",e.price]}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"/month"})]})]}),(0,r.jsx)("ul",{className:"mt-6 space-y-3",children:e.features.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e})]},s))}),(0,r.jsx)("div",{className:"mt-6",children:(null==N?void 0:N.id)===e.id?(0,r.jsx)("button",{disabled:!0,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-400 cursor-not-allowed",children:"Current Plan"}):(0,r.jsx)("button",{onClick:()=>handleUpgrade(e.id),disabled:b.isLoading,className:(0,g.Z)("w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",e.popular?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-600 hover:bg-gray-700"),children:b.isLoading?(0,r.jsx)(x.Z,{className:"animate-spin h-4 w-4"}):"Upgrade to ".concat(e.name)})})]},e.id))})]})}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Billing History"}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Your billing history will appear here once you have an active subscription."}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Download Invoice History"})})]})]})}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Frequently Asked Questions"}),(0,r.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Can I change my plan anytime?"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Yes, you can upgrade or downgrade your plan at any time. Changes take effect immediately and you'll be prorated for the difference."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Do you offer refunds?"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"We offer a 30-day money-back guarantee for new subscribers. Contact support for assistance."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"How does the free trial work?"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"The Starter plan includes a 7-day free trial. No credit card required during the trial period."})]})]})]})})]})})})}},function(e){e.O(0,[216,888,179],function(){return e(e.s=5468)}),_N_E=e.O()}]);