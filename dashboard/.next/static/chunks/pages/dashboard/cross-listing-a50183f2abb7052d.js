(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{9558:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/cross-listing",function(){return t(2368)}])},2368:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var r=t(4246),a=t(7378),l=t(6677),i=t(6552),n=t(6518),c=t(2874),d=t(2985),o=t(4589),m=t(752);let x=a.forwardRef(function({title:e,titleId:s,...t},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var h=t(7750),u=t(1842),g=t(6070),p=t(4752),j=t(6596),f=t(624),y=(0,n.QO)(function(){var e,s;let t=(0,l.useRouter)(),[n,y]=(0,a.useState)([]),[N,v]=(0,a.useState)([]),[b,w]=(0,a.useState)(!0),[k,C]=(0,a.useState)(!1),[E,_]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(t.query.items){let e=t.query.items.split(",");y(e),_(!0)}},[t.query.items]);let{data:Z,isLoading:D}=(0,i.useQuery)("inventory-for-crosslisting",()=>d.x.getInventory({limit:100}),{retry:!1}),{data:S,isLoading:L,refetch:P}=(0,i.useQuery)("crosslisting-requests",()=>d.x.get("/crosslisting/requests"),{retry:!1,refetchInterval:5e3}),R=(0,i.useMutation)(e=>d.x.createCrossListing(e),{onSuccess:()=>{_(!1),y([]),v([]),P()}}),A=(null==Z?void 0:null===(e=Z.data)||void 0===e?void 0:e.items)||[],O=Array.isArray(null==S?void 0:S.data)?S.data:[],handleItemToggle=e=>{y(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},handlePlatformToggle=e=>{v(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},I=[{id:j.t4.EBAY,name:"eBay",color:"bg-blue-500",icon:"\uD83C\uDFEA"},{id:j.t4.MERCARI,name:"Mercari",color:"bg-red-500",icon:"\uD83D\uDECD️"},{id:j.t4.POSHMARK,name:"Poshmark",color:"bg-pink-500",icon:"\uD83D\uDC57"},{id:j.t4.FACEBOOK_MARKETPLACE,name:"Facebook Marketplace",color:"bg-blue-600",icon:"\uD83D\uDCF1"},{id:j.t4.DEPOP,name:"Depop",color:"bg-purple-500",icon:"\uD83C\uDFA8"},{id:j.t4.ETSY,name:"Etsy",color:"bg-orange-500",icon:"\uD83C\uDFAD"}],getStatusIcon=e=>{switch(e){case"completed":return(0,r.jsx)(o.Z,{className:"h-5 w-5 text-green-500"});case"failed":return(0,r.jsx)(m.Z,{className:"h-5 w-5 text-red-500"});case"in_progress":return(0,r.jsx)(x,{className:"h-5 w-5 text-yellow-500 animate-pulse"});case"cancelled":return(0,r.jsx)(m.Z,{className:"h-5 w-5 text-gray-500"});default:return(0,r.jsx)(x,{className:"h-5 w-5 text-gray-500"})}},getStatusBadge=e=>{let s={pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pending"},in_progress:{bg:"bg-blue-100",text:"text-blue-800",label:"In Progress"},completed:{bg:"bg-green-100",text:"text-green-800",label:"Completed"},failed:{bg:"bg-red-100",text:"text-red-800",label:"Failed"},cancelled:{bg:"bg-gray-100",text:"text-gray-800",label:"Cancelled"}},t=s[e]||s.pending;return(0,r.jsx)("span",{className:(0,f.Z)("inline-flex px-2 py-1 text-xs font-medium rounded-full",t.bg,t.text),children:t.label})};return(0,r.jsx)(c.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Cross-listing"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"List your items across multiple platforms automatically"})]}),(0,r.jsxs)("button",{onClick:()=>_(!0),className:"btn-primary flex items-center",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Create Cross-listing"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(u.Z,{className:"h-8 w-8 text-blue-500"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Requests"}),(0,r.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:O.length})]})})]})})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(o.Z,{className:"h-8 w-8 text-green-500"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Completed"}),(0,r.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:O.filter(e=>"completed"===e.status).length})]})})]})})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(x,{className:"h-8 w-8 text-yellow-500"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"In Progress"}),(0,r.jsx)("dd",{className:"text-2xl font-semibold text-gray-900",children:O.filter(e=>["pending","in_progress"].includes(e.status)).length})]})})]})})})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Recent Cross-listing Requests"}),(0,r.jsxs)("button",{onClick:()=>P(),className:"btn-secondary text-sm",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"Refresh"]})]})}),(0,r.jsx)("div",{className:"card-body p-0",children:L?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"spinner"})}):0===O.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(u.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No cross-listing requests"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first cross-listing request."})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platforms"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,r.jsx)("th",{className:"relative px-6 py-3",children:(0,r.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(e=>{var s,t,a,l,i;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[getStatusIcon(e.status),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Request #",e.id.slice(-8)]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.optimize_seo&&"SEO Optimized",e.optimize_seo&&e.generate_descriptions&&" • ",e.generate_descriptions&&"AI Descriptions"]})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:[(null===(s=e.inventory_items)||void 0===s?void 0:s.length)||0," item",1!==((null===(t=e.inventory_items)||void 0===t?void 0:t.length)||0)?"s":""]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex -space-x-1",children:[null===(a=e.target_platforms)||void 0===a?void 0:a.slice(0,3).map(e=>{let s=I.find(s=>s.id===e);return(0,r.jsx)("div",{className:(0,f.Z)("inline-flex items-center justify-center w-6 h-6 rounded-full border-2 border-white text-xs",(null==s?void 0:s.color)||"bg-gray-500"),title:null==s?void 0:s.name,children:null==s?void 0:s.icon},e)}),((null===(l=e.target_platforms)||void 0===l?void 0:l.length)||0)>3&&(0,r.jsxs)("div",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 border-2 border-white text-xs text-gray-600",children:["+",((null===(i=e.target_platforms)||void 0===i?void 0:i.length)||0)-3]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:getStatusBadge(e.status)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsx)("button",{className:"text-primary-600 hover:text-primary-900",children:(0,r.jsx)(g.Z,{className:"h-4 w-4"})})})]},e.id)})})]})})})]}),E&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Create Cross-listing Request"}),(0,r.jsx)("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(m.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:["Select Items (",n.length,")"]}),(0,r.jsx)("div",{className:"border rounded-lg max-h-64 overflow-y-auto",children:D?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"spinner"})}):0===A.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(p.Z,{className:"mx-auto h-8 w-8 text-gray-400"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"No items available"})]}):(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:A.map(e=>{var s;return(0,r.jsx)("div",{className:"p-3",children:(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:n.includes(e.id),onChange:()=>handleItemToggle(e.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,r.jsxs)("div",{className:"ml-3 flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(null===(s=e.images)||void 0===s?void 0:s[0])?(0,r.jsx)("img",{className:"h-8 w-8 rounded object-cover",src:e.images[0],alt:e.title}):(0,r.jsx)("div",{className:"h-8 w-8 rounded bg-gray-200 flex items-center justify-center",children:(0,r.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"})})}),(0,r.jsxs)("div",{className:"ml-2",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["$",e.retailPrice," • ",e.sku]})]})]})]})},e.id)})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:["Select Platforms (",N.length,")"]}),(0,r.jsx)("div",{className:"space-y-3",children:I.map(e=>(0,r.jsxs)("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,r.jsx)("input",{type:"checkbox",checked:N.includes(e.id),onChange:()=>handlePlatformToggle(e.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,r.jsxs)("div",{className:"ml-3 flex items-center",children:[(0,r.jsx)("div",{className:(0,f.Z)("w-8 h-8 rounded-full flex items-center justify-center text-white text-sm",e.color),children:e.icon}),(0,r.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-900",children:e.name})]})]},e.id))}),(0,r.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:b,onChange:e=>w(e.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Optimize for SEO"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:k,onChange:e=>C(e.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Generate AI descriptions"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3 mt-6 pt-6 border-t",children:[(0,r.jsx)("button",{onClick:()=>_(!1),className:"btn-secondary",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{0!==n.length&&0!==N.length&&R.mutate({sourcePlatform:j.t4.EBAY,targetPlatforms:N,inventoryItems:n,optimizeSEO:b,generateDescriptions:k})},disabled:0===n.length||0===N.length||R.isLoading,className:"btn-primary",children:R.isLoading?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"spinner mr-2"}),"Creating..."]}):"Create Cross-listing"})]}),R.error?(0,r.jsx)("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-3",children:(0,r.jsx)("p",{className:"text-sm text-red-800",children:String(null===(s=R.error)||void 0===s?void 0:s.message)||"Failed to create cross-listing"})}):null]})})})]})})})},6070:function(e,s,t){"use strict";var r=t(7378);let a=r.forwardRef(function({title:e,titleId:s,...t},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?r.createElement("title",{id:s},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});s.Z=a},7750:function(e,s,t){"use strict";var r=t(7378);let a=r.forwardRef(function({title:e,titleId:s,...t},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?r.createElement("title",{id:s},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});s.Z=a},752:function(e,s,t){"use strict";var r=t(7378);let a=r.forwardRef(function({title:e,titleId:s,...t},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?r.createElement("title",{id:s},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});s.Z=a}},function(e){e.O(0,[894,228,774,888,179],function(){return e(e.s=9558)}),_N_E=e.O()}]);